{"version":3,"sources":["js/multi.js"],"names":["multi","disabled_limit","trigger_event","type","el","e","document","createEvent","initEvent","dispatchEvent","toggle_option","select","event","settings","option","options","target","getAttribute","disabled","selected","limit","selected_count","i","length","limit_reached","opt","setAttribute","removeAttribute","refresh_select","wrapper","innerHTML","non_selected","non_selected_header","selected_header","createElement","className","innerText","appendChild","search","query","value","item_group","current_optgroup","label","textContent","row","tabIndex","clone","cloneNode","parentNode","nodeName","groupLabel","toLowerCase","indexOf","init","parseInt","isNaN","dataset","multijs","multiple","style","display","enable_search","search_placeholder","addEventListener","row_wrapper","is_action_key","keyCode","is_option","preventDefault","insertBefore","nextSibling","jQuery","$","fn","each","$select","get"],"mappings":"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","file":"multi.71430e4e.js","sourceRoot":"..","sourcesContent":["/**\n * multi.js\n * A user-friendly replacement for select boxes with multiple attribute enabled.\n *\n * Author: Fabian Lindfors\n * License: MIT\n */\nvar multi = (function() {\n  var disabled_limit = false; // This will prevent to reset the \"disabled\" because of the limit at every click\n\n  // Helper function to trigger an event on an element\n  var trigger_event = function(type, el) {\n    var e = document.createEvent(\"HTMLEvents\");\n    e.initEvent(type, false, true);\n    el.dispatchEvent(e);\n  };\n\n  // Toggles the target option on the select\n  var toggle_option = function(select, event, settings) {\n    var option = select.options[event.target.getAttribute(\"multi-index\")];\n\n    if (option.disabled) {\n      return;\n    }\n\n    option.selected = !option.selected;\n\n    // Check if there is a limit and if is reached\n    var limit = settings.limit;\n    if (limit > -1) {\n      // Count current selected\n      var selected_count = 0;\n      for (var i = 0; i < select.options.length; i++) {\n        if (select.options[i].selected) {\n          selected_count++;\n        }\n      }\n\n      // Reached the limit\n      if (selected_count === limit) {\n        this.disabled_limit = true;\n\n        // Trigger the function (if there is)\n        if (typeof settings.limit_reached === \"function\") {\n          settings.limit_reached();\n        }\n\n        // Disable all non-selected option\n        for (var i = 0; i < select.options.length; i++) {\n          var opt = select.options[i];\n\n          if (!opt.selected) {\n            opt.setAttribute(\"disabled\", true);\n          }\n        }\n      } else if (this.disabled_limit) {\n        // Enable options (only if they weren't disabled on init)\n        for (var i = 0; i < select.options.length; i++) {\n          var opt = select.options[i];\n\n          if (opt.getAttribute(\"data-origin-disabled\") === \"false\") {\n            opt.removeAttribute(\"disabled\");\n          }\n        }\n\n        this.disabled_limit = false;\n      }\n    }\n\n    trigger_event(\"change\", select);\n  };\n\n  // Refreshes an already constructed multi.js instance\n  var refresh_select = function(select, settings) {\n    // Clear columns\n    select.wrapper.selected.innerHTML = \"\";\n    select.wrapper.non_selected.innerHTML = \"\";\n\n    // Add headers to columns\n    if (settings.non_selected_header && settings.selected_header) {\n      var non_selected_header = document.createElement(\"div\");\n      var selected_header = document.createElement(\"div\");\n\n      non_selected_header.className = \"header\";\n      selected_header.className = \"header\";\n\n      non_selected_header.innerText = settings.non_selected_header;\n      selected_header.innerText = settings.selected_header;\n\n      select.wrapper.non_selected.appendChild(non_selected_header);\n      select.wrapper.selected.appendChild(selected_header);\n    }\n\n    // Get search value\n    if (select.wrapper.search) {\n      var query = select.wrapper.search.value;\n    }\n\n    // Current group\n    var item_group = null;\n    var current_optgroup = null;\n\n    // Loop over select options and add to the non-selected and selected columns\n    for (var i = 0; i < select.options.length; i++) {\n      var option = select.options[i];\n\n      var value = option.value;\n      var label = option.textContent || option.innerText;\n\n      var row = document.createElement(\"a\");\n      row.tabIndex = 0;\n      row.className = \"item\";\n      row.innerText = label;\n      row.setAttribute(\"role\", \"button\");\n      row.setAttribute(\"data-value\", value);\n      row.setAttribute(\"multi-index\", i);\n\n      if (option.disabled) {\n        row.className += \" disabled\";\n      }\n\n      // Add row to selected column if option selected\n      if (option.selected) {\n        row.className += \" selected\";\n        var clone = row.cloneNode(true);\n        select.wrapper.selected.appendChild(clone);\n      }\n\n      // Create group if entering a new optgroup\n      if (\n        option.parentNode.nodeName == \"OPTGROUP\" &&\n        option.parentNode != current_optgroup\n      ) {\n        current_optgroup = option.parentNode;\n        item_group = document.createElement(\"div\");\n        item_group.className = \"item-group\";\n\n        if (option.parentNode.label) {\n          var groupLabel = document.createElement(\"span\");\n          groupLabel.innerHTML = option.parentNode.label;\n          groupLabel.className = \"group-label\";\n          item_group.appendChild(groupLabel);\n        }\n\n        select.wrapper.non_selected.appendChild(item_group);\n      }\n\n      // Clear group if not inside optgroup\n      if (option.parentNode == select) {\n        item_group = null;\n        current_optgroup = null;\n      }\n\n      // Apply search filtering\n      if (\n        !query ||\n        (query && label.toLowerCase().indexOf(query.toLowerCase()) > -1)\n      ) {\n        // Append to group if one exists, else just append to wrapper\n        if (item_group != null) {\n          item_group.appendChild(row);\n        } else {\n          select.wrapper.non_selected.appendChild(row);\n        }\n      }\n    }\n  };\n\n  // Intializes and constructs an multi.js instance\n  var init = function(select, settings) {\n    /**\n     * Set up settings (optional parameter) and its default values\n     *\n     * Default values:\n     * enable_search : true\n     * search_placeholder : \"Search...\"\n     */\n    settings = typeof settings !== \"undefined\" ? settings : {};\n\n    settings[\"enable_search\"] =\n      typeof settings[\"enable_search\"] !== \"undefined\"\n        ? settings[\"enable_search\"]\n        : true;\n    settings[\"search_placeholder\"] =\n      typeof settings[\"search_placeholder\"] !== \"undefined\"\n        ? settings[\"search_placeholder\"]\n        : \"Search...\";\n    settings[\"non_selected_header\"] =\n      typeof settings[\"non_selected_header\"] !== \"undefined\"\n        ? settings[\"non_selected_header\"]\n        : null;\n    settings[\"selected_header\"] =\n      typeof settings[\"selected_header\"] !== \"undefined\"\n        ? settings[\"selected_header\"]\n        : null;\n    settings[\"limit\"] =\n      typeof settings[\"limit\"] !== \"undefined\"\n        ? parseInt(settings[\"limit\"])\n        : -1;\n    if (isNaN(settings[\"limit\"])) {\n      settings[\"limit\"] = -1;\n    }\n\n    // Check if already initalized\n    if (select.dataset.multijs != null) {\n      return;\n    }\n\n    // Make sure element is select and multiple is enabled\n    if (select.nodeName != \"SELECT\" || !select.multiple) {\n      return;\n    }\n\n    // Hide select\n    select.style.display = \"none\";\n    select.setAttribute(\"data-multijs\", true);\n\n    // Start constructing selector\n    var wrapper = document.createElement(\"div\");\n    wrapper.className = \"multi-wrapper\";\n\n    // Add search bar\n    if (settings.enable_search) {\n      var search = document.createElement(\"input\");\n      search.className = \"search-input\";\n      search.type = \"text\";\n      search.setAttribute(\"placeholder\", settings.search_placeholder);\n\n      search.addEventListener(\"input\", function() {\n        refresh_select(select, settings);\n      });\n\n      wrapper.appendChild(search);\n      wrapper.search = search;\n    }\n\n    var row_wrapper = document.createElement(\"div\");\n    row_wrapper.className = \"row\";\n\n    // Add columns for selected and non-selected\n    var non_selected = document.createElement(\"div\");\n    non_selected.className = \"non-selected-wrapper col-sm-6\";\n\n    var selected = document.createElement(\"div\");\n    selected.className = \"selected-wrapper col-sm-6\";\n\n    // Add click handler to toggle the selected status\n    wrapper.addEventListener(\"click\", function(event) {\n      if (event.target.getAttribute(\"multi-index\")) {\n        toggle_option(select, event, settings);\n      }\n    });\n\n    // Add keyboard handler to toggle the selected status\n    wrapper.addEventListener(\"keypress\", function(event) {\n      var is_action_key = event.keyCode === 32 || event.keyCode === 13;\n      var is_option = event.target.getAttribute(\"multi-index\");\n\n      if (is_option && is_action_key) {\n        // Prevent the default action to stop scrolling when space is pressed\n        event.preventDefault();\n        toggle_option(select, event, settings);\n      }\n    });\n\n    wrapper.appendChild(row_wrapper)\n    row_wrapper.appendChild(non_selected);\n    row_wrapper.appendChild(selected);\n\n    wrapper.non_selected = non_selected;\n    wrapper.selected = selected;\n\n    select.wrapper = wrapper;\n\n    // Add multi.js wrapper after select element\n    select.parentNode.insertBefore(wrapper, select.nextSibling);\n\n    // Save current state\n    for (var i = 0; i < select.options.length; i++) {\n      var option = select.options[i];\n      option.setAttribute(\"data-origin-disabled\", option.disabled);\n    }\n\n    // Initialize selector with values from select element\n    refresh_select(select, settings);\n\n    // Refresh selector when select values change\n    select.addEventListener(\"change\", function() {\n      refresh_select(select, settings);\n    });\n  };\n\n  return init;\n})();\n\n// Add jQuery wrapper if jQuery is present\nif (typeof jQuery !== \"undefined\") {\n  (function($) {\n    $.fn.multi = function(settings) {\n      settings = typeof settings !== \"undefined\" ? settings : {};\n\n      return this.each(function() {\n        var $select = $(this);\n\n        multi($select.get(0), settings);\n      });\n    };\n  })(jQuery);\n}\n"]}