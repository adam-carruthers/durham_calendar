{"version":3,"sources":["js/multi.js"],"names":["multi","disabled_limit","trigger_event","type","el","e","document","createEvent","initEvent","dispatchEvent","toggle_option","select","event","settings","option","options","target","getAttribute","disabled","selected","limit","selected_count","i","length","limit_reached","opt","setAttribute","removeAttribute","refresh_select","wrapper","innerHTML","non_selected","non_selected_header","selected_header","createElement","className","innerText","appendChild","search","query","value","item_group","current_optgroup","label","textContent","row","tabIndex","clone","cloneNode","parentNode","nodeName","groupLabel","toLowerCase","indexOf","init","parseInt","isNaN","dataset","multijs","multiple","style","display","enable_search","search_placeholder","addEventListener","row_wrapper","is_action_key","keyCode","is_option","preventDefault","insertBefore","nextSibling","jQuery","$","fn","each","$select","get"],"mappings":"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","file":"multi.71430e4e.js","sourceRoot":"..","sourcesContent":["/**\r\n * multi.js\r\n * A user-friendly replacement for select boxes with multiple attribute enabled.\r\n *\r\n * Author: Fabian Lindfors\r\n * License: MIT\r\n */\r\nvar multi = (function() {\r\n  var disabled_limit = false; // This will prevent to reset the \"disabled\" because of the limit at every click\r\n\r\n  // Helper function to trigger an event on an element\r\n  var trigger_event = function(type, el) {\r\n    var e = document.createEvent(\"HTMLEvents\");\r\n    e.initEvent(type, false, true);\r\n    el.dispatchEvent(e);\r\n  };\r\n\r\n  // Toggles the target option on the select\r\n  var toggle_option = function(select, event, settings) {\r\n    var option = select.options[event.target.getAttribute(\"multi-index\")];\r\n\r\n    if (option.disabled) {\r\n      return;\r\n    }\r\n\r\n    option.selected = !option.selected;\r\n\r\n    // Check if there is a limit and if is reached\r\n    var limit = settings.limit;\r\n    if (limit > -1) {\r\n      // Count current selected\r\n      var selected_count = 0;\r\n      for (var i = 0; i < select.options.length; i++) {\r\n        if (select.options[i].selected) {\r\n          selected_count++;\r\n        }\r\n      }\r\n\r\n      // Reached the limit\r\n      if (selected_count === limit) {\r\n        this.disabled_limit = true;\r\n\r\n        // Trigger the function (if there is)\r\n        if (typeof settings.limit_reached === \"function\") {\r\n          settings.limit_reached();\r\n        }\r\n\r\n        // Disable all non-selected option\r\n        for (var i = 0; i < select.options.length; i++) {\r\n          var opt = select.options[i];\r\n\r\n          if (!opt.selected) {\r\n            opt.setAttribute(\"disabled\", true);\r\n          }\r\n        }\r\n      } else if (this.disabled_limit) {\r\n        // Enable options (only if they weren't disabled on init)\r\n        for (var i = 0; i < select.options.length; i++) {\r\n          var opt = select.options[i];\r\n\r\n          if (opt.getAttribute(\"data-origin-disabled\") === \"false\") {\r\n            opt.removeAttribute(\"disabled\");\r\n          }\r\n        }\r\n\r\n        this.disabled_limit = false;\r\n      }\r\n    }\r\n\r\n    trigger_event(\"change\", select);\r\n  };\r\n\r\n  // Refreshes an already constructed multi.js instance\r\n  var refresh_select = function(select, settings) {\r\n    // Clear columns\r\n    select.wrapper.selected.innerHTML = \"\";\r\n    select.wrapper.non_selected.innerHTML = \"\";\r\n\r\n    // Add headers to columns\r\n    if (settings.non_selected_header && settings.selected_header) {\r\n      var non_selected_header = document.createElement(\"div\");\r\n      var selected_header = document.createElement(\"div\");\r\n\r\n      non_selected_header.className = \"header\";\r\n      selected_header.className = \"header\";\r\n\r\n      non_selected_header.innerText = settings.non_selected_header;\r\n      selected_header.innerText = settings.selected_header;\r\n\r\n      select.wrapper.non_selected.appendChild(non_selected_header);\r\n      select.wrapper.selected.appendChild(selected_header);\r\n    }\r\n\r\n    // Get search value\r\n    if (select.wrapper.search) {\r\n      var query = select.wrapper.search.value;\r\n    }\r\n\r\n    // Current group\r\n    var item_group = null;\r\n    var current_optgroup = null;\r\n\r\n    // Loop over select options and add to the non-selected and selected columns\r\n    for (var i = 0; i < select.options.length; i++) {\r\n      var option = select.options[i];\r\n\r\n      var value = option.value;\r\n      var label = option.textContent || option.innerText;\r\n\r\n      var row = document.createElement(\"a\");\r\n      row.tabIndex = 0;\r\n      row.className = \"item\";\r\n      row.innerText = label;\r\n      row.setAttribute(\"role\", \"button\");\r\n      row.setAttribute(\"data-value\", value);\r\n      row.setAttribute(\"multi-index\", i);\r\n\r\n      if (option.disabled) {\r\n        row.className += \" disabled\";\r\n      }\r\n\r\n      // Add row to selected column if option selected\r\n      if (option.selected) {\r\n        row.className += \" selected\";\r\n        var clone = row.cloneNode(true);\r\n        select.wrapper.selected.appendChild(clone);\r\n      }\r\n\r\n      // Create group if entering a new optgroup\r\n      if (\r\n        option.parentNode.nodeName == \"OPTGROUP\" &&\r\n        option.parentNode != current_optgroup\r\n      ) {\r\n        current_optgroup = option.parentNode;\r\n        item_group = document.createElement(\"div\");\r\n        item_group.className = \"item-group\";\r\n\r\n        if (option.parentNode.label) {\r\n          var groupLabel = document.createElement(\"span\");\r\n          groupLabel.innerHTML = option.parentNode.label;\r\n          groupLabel.className = \"group-label\";\r\n          item_group.appendChild(groupLabel);\r\n        }\r\n\r\n        select.wrapper.non_selected.appendChild(item_group);\r\n      }\r\n\r\n      // Clear group if not inside optgroup\r\n      if (option.parentNode == select) {\r\n        item_group = null;\r\n        current_optgroup = null;\r\n      }\r\n\r\n      // Apply search filtering\r\n      if (\r\n        !query ||\r\n        (query && label.toLowerCase().indexOf(query.toLowerCase()) > -1)\r\n      ) {\r\n        // Append to group if one exists, else just append to wrapper\r\n        if (item_group != null) {\r\n          item_group.appendChild(row);\r\n        } else {\r\n          select.wrapper.non_selected.appendChild(row);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Intializes and constructs an multi.js instance\r\n  var init = function(select, settings) {\r\n    /**\r\n     * Set up settings (optional parameter) and its default values\r\n     *\r\n     * Default values:\r\n     * enable_search : true\r\n     * search_placeholder : \"Search...\"\r\n     */\r\n    settings = typeof settings !== \"undefined\" ? settings : {};\r\n\r\n    settings[\"enable_search\"] =\r\n      typeof settings[\"enable_search\"] !== \"undefined\"\r\n        ? settings[\"enable_search\"]\r\n        : true;\r\n    settings[\"search_placeholder\"] =\r\n      typeof settings[\"search_placeholder\"] !== \"undefined\"\r\n        ? settings[\"search_placeholder\"]\r\n        : \"Search...\";\r\n    settings[\"non_selected_header\"] =\r\n      typeof settings[\"non_selected_header\"] !== \"undefined\"\r\n        ? settings[\"non_selected_header\"]\r\n        : null;\r\n    settings[\"selected_header\"] =\r\n      typeof settings[\"selected_header\"] !== \"undefined\"\r\n        ? settings[\"selected_header\"]\r\n        : null;\r\n    settings[\"limit\"] =\r\n      typeof settings[\"limit\"] !== \"undefined\"\r\n        ? parseInt(settings[\"limit\"])\r\n        : -1;\r\n    if (isNaN(settings[\"limit\"])) {\r\n      settings[\"limit\"] = -1;\r\n    }\r\n\r\n    // Check if already initalized\r\n    if (select.dataset.multijs != null) {\r\n      return;\r\n    }\r\n\r\n    // Make sure element is select and multiple is enabled\r\n    if (select.nodeName != \"SELECT\" || !select.multiple) {\r\n      return;\r\n    }\r\n\r\n    // Hide select\r\n    select.style.display = \"none\";\r\n    select.setAttribute(\"data-multijs\", true);\r\n\r\n    // Start constructing selector\r\n    var wrapper = document.createElement(\"div\");\r\n    wrapper.className = \"multi-wrapper\";\r\n\r\n    // Add search bar\r\n    if (settings.enable_search) {\r\n      var search = document.createElement(\"input\");\r\n      search.className = \"search-input\";\r\n      search.type = \"text\";\r\n      search.setAttribute(\"placeholder\", settings.search_placeholder);\r\n\r\n      search.addEventListener(\"input\", function() {\r\n        refresh_select(select, settings);\r\n      });\r\n\r\n      wrapper.appendChild(search);\r\n      wrapper.search = search;\r\n    }\r\n\r\n    var row_wrapper = document.createElement(\"div\");\r\n    row_wrapper.className = \"row\";\r\n\r\n    // Add columns for selected and non-selected\r\n    var non_selected = document.createElement(\"div\");\r\n    non_selected.className = \"non-selected-wrapper col-sm-6\";\r\n\r\n    var selected = document.createElement(\"div\");\r\n    selected.className = \"selected-wrapper col-sm-6\";\r\n\r\n    // Add click handler to toggle the selected status\r\n    wrapper.addEventListener(\"click\", function(event) {\r\n      if (event.target.getAttribute(\"multi-index\")) {\r\n        toggle_option(select, event, settings);\r\n      }\r\n    });\r\n\r\n    // Add keyboard handler to toggle the selected status\r\n    wrapper.addEventListener(\"keypress\", function(event) {\r\n      var is_action_key = event.keyCode === 32 || event.keyCode === 13;\r\n      var is_option = event.target.getAttribute(\"multi-index\");\r\n\r\n      if (is_option && is_action_key) {\r\n        // Prevent the default action to stop scrolling when space is pressed\r\n        event.preventDefault();\r\n        toggle_option(select, event, settings);\r\n      }\r\n    });\r\n\r\n    wrapper.appendChild(row_wrapper)\r\n    row_wrapper.appendChild(non_selected);\r\n    row_wrapper.appendChild(selected);\r\n\r\n    wrapper.non_selected = non_selected;\r\n    wrapper.selected = selected;\r\n\r\n    select.wrapper = wrapper;\r\n\r\n    // Add multi.js wrapper after select element\r\n    select.parentNode.insertBefore(wrapper, select.nextSibling);\r\n\r\n    // Save current state\r\n    for (var i = 0; i < select.options.length; i++) {\r\n      var option = select.options[i];\r\n      option.setAttribute(\"data-origin-disabled\", option.disabled);\r\n    }\r\n\r\n    // Initialize selector with values from select element\r\n    refresh_select(select, settings);\r\n\r\n    // Refresh selector when select values change\r\n    select.addEventListener(\"change\", function() {\r\n      refresh_select(select, settings);\r\n    });\r\n  };\r\n\r\n  return init;\r\n})();\r\n\r\n// Add jQuery wrapper if jQuery is present\r\nif (typeof jQuery !== \"undefined\") {\r\n  (function($) {\r\n    $.fn.multi = function(settings) {\r\n      settings = typeof settings !== \"undefined\" ? settings : {};\r\n\r\n      return this.each(function() {\r\n        var $select = $(this);\r\n\r\n        multi($select.get(0), settings);\r\n      });\r\n    };\r\n  })(jQuery);\r\n}\r\n"]}