{"version":3,"sources":["js/multi.js"],"names":["multi","disabled_limit","toggle_option","select","event","settings","option","options","target","getAttribute","disabled","selected","limit","type","el","e","selected_count","i","length","limit_reached","opt","setAttribute","removeAttribute","document","createEvent","initEvent","dispatchEvent","refresh_select","wrapper","innerHTML","non_selected","non_selected_header","selected_header","createElement","className","innerText","appendChild","search","query","value","item_group","current_optgroup","label","textContent","row","tabIndex","clone","cloneNode","parentNode","nodeName","groupLabel","toLowerCase","indexOf","init","parseInt","isNaN","dataset","multijs","multiple","style","display","enable_search","search_placeholder","addEventListener","row_wrapper","is_action_key","keyCode","preventDefault","insertBefore","nextSibling","jQuery","$","fn","each","$select","get"],"mappings":"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","file":"multi.1fe4b9d6.js","sourceRoot":"..","sourcesContent":["/**\r\n * multi.js\r\n * A user-friendly replacement for select boxes with multiple attribute enabled.\r\n *\r\n * Author: Fabian Lindfors\r\n * License: MIT\r\n */\r\nvar multi = (function() {\r\n  var disabled_limit = false; // This will prevent to reset the \"disabled\" because of the limit at every click\r\n\r\n  // Helper function to trigger an event on an element\r\n  var trigger_event = function(type, el) {\r\n    var e = document.createEvent(\"HTMLEvents\");\r\n    e.initEvent(type, false, true);\r\n    el.dispatchEvent(e);\r\n  };\r\n\r\n  // Toggles the target option on the select\r\n  var toggle_option = function(select, event, settings) {\r\n    var option = select.options[event.target.getAttribute(\"multi-index\")];\r\n\r\n    if (option.disabled) {\r\n      return;\r\n    }\r\n\r\n    option.selected = !option.selected;\r\n\r\n    // Check if there is a limit and if is reached\r\n    var limit = settings.limit;\r\n    if (limit > -1) {\r\n      // Count current selected\r\n      var selected_count = 0;\r\n      for (var i = 0; i < select.options.length; i++) {\r\n        if (select.options[i].selected) {\r\n          selected_count++;\r\n        }\r\n      }\r\n\r\n      // Reached the limit\r\n      if (selected_count === limit) {\r\n        this.disabled_limit = true;\r\n\r\n        // Trigger the function (if there is)\r\n        if (typeof settings.limit_reached === \"function\") {\r\n          settings.limit_reached();\r\n        }\r\n\r\n        // Disable all non-selected option\r\n        for (var i = 0; i < select.options.length; i++) {\r\n          var opt = select.options[i];\r\n\r\n          if (!opt.selected) {\r\n            opt.setAttribute(\"disabled\", true);\r\n          }\r\n        }\r\n      } else if (this.disabled_limit) {\r\n        // Enable options (only if they weren't disabled on init)\r\n        for (var i = 0; i < select.options.length; i++) {\r\n          var opt = select.options[i];\r\n\r\n          if (opt.getAttribute(\"data-origin-disabled\") === \"false\") {\r\n            opt.removeAttribute(\"disabled\");\r\n          }\r\n        }\r\n\r\n        this.disabled_limit = false;\r\n      }\r\n    }\r\n\r\n    trigger_event(\"change\", select);\r\n  };\r\n\r\n  // Refreshes an already constructed multi.js instance\r\n  var refresh_select = function(select, settings) {\r\n    // Clear columns\r\n    select.wrapper.selected.innerHTML = \"\";\r\n    select.wrapper.non_selected.innerHTML = \"\";\r\n\r\n    // Add headers to columns\r\n    if (settings.non_selected_header && settings.selected_header) {\r\n      var non_selected_header = document.createElement(\"div\");\r\n      var selected_header = document.createElement(\"div\");\r\n\r\n      non_selected_header.className = \"header\";\r\n      selected_header.className = \"header\";\r\n\r\n      non_selected_header.innerText = settings.non_selected_header;\r\n      selected_header.innerText = settings.selected_header;\r\n\r\n      select.wrapper.non_selected.appendChild(non_selected_header);\r\n      select.wrapper.selected.appendChild(selected_header);\r\n    }\r\n\r\n    // Get search value\r\n    if (select.wrapper.search) {\r\n      var query = select.wrapper.search.value;\r\n    }\r\n\r\n    // Current group\r\n    var item_group = null;\r\n    var current_optgroup = null;\r\n\r\n    // Loop over select options and add to the non-selected and selected columns\r\n    for (var i = 0; i < select.options.length; i++) {\r\n      var option = select.options[i];\r\n\r\n      var value = option.value;\r\n      var label = option.textContent || option.innerText;\r\n\r\n      var row = document.createElement(\"a\");\r\n      row.tabIndex = 0;\r\n      row.className = \"item\";\r\n      row.innerText = label;\r\n      row.setAttribute(\"role\", \"button\");\r\n      row.setAttribute(\"data-value\", value);\r\n      row.setAttribute(\"multi-index\", i);\r\n\r\n      if (option.disabled) {\r\n        row.className += \" disabled\";\r\n      }\r\n\r\n      // Add row to selected column if option selected\r\n      if (option.selected) {\r\n        row.className += \" selected\";\r\n        var clone = row.cloneNode(true);\r\n        select.wrapper.selected.appendChild(clone);\r\n      }\r\n\r\n      // Create group if entering a new optgroup\r\n      if (\r\n        option.parentNode.nodeName == \"OPTGROUP\" &&\r\n        option.parentNode != current_optgroup\r\n      ) {\r\n        current_optgroup = option.parentNode;\r\n        item_group = document.createElement(\"div\");\r\n        item_group.className = \"item-group\";\r\n\r\n        if (option.parentNode.label) {\r\n          var groupLabel = document.createElement(\"span\");\r\n          groupLabel.innerHTML = option.parentNode.label;\r\n          groupLabel.className = \"group-label\";\r\n          item_group.appendChild(groupLabel);\r\n        }\r\n\r\n        select.wrapper.non_selected.appendChild(item_group);\r\n      }\r\n\r\n      // Clear group if not inside optgroup\r\n      if (option.parentNode == select) {\r\n        item_group = null;\r\n        current_optgroup = null;\r\n      }\r\n\r\n      // Apply search filtering\r\n      if (\r\n        !query ||\r\n        (query && label.toLowerCase().indexOf(query.toLowerCase()) > -1)\r\n      ) {\r\n        // Append to group if one exists, else just append to wrapper\r\n        if (item_group != null) {\r\n          item_group.appendChild(row);\r\n        } else {\r\n          select.wrapper.non_selected.appendChild(row);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Intializes and constructs an multi.js instance\r\n  var init = function(select, settings) {\r\n    /**\r\n     * Set up settings (optional parameter) and its default values\r\n     *\r\n     * Default values:\r\n     * enable_search : true\r\n     * search_placeholder : \"Search...\"\r\n     */\r\n    settings = typeof settings !== \"undefined\" ? settings : {};\r\n\r\n    settings[\"enable_search\"] =\r\n      typeof settings[\"enable_search\"] !== \"undefined\"\r\n        ? settings[\"enable_search\"]\r\n        : true;\r\n    settings[\"search_placeholder\"] =\r\n      typeof settings[\"search_placeholder\"] !== \"undefined\"\r\n        ? settings[\"search_placeholder\"]\r\n        : \"Search...\";\r\n    settings[\"non_selected_header\"] =\r\n      typeof settings[\"non_selected_header\"] !== \"undefined\"\r\n        ? settings[\"non_selected_header\"]\r\n        : null;\r\n    settings[\"selected_header\"] =\r\n      typeof settings[\"selected_header\"] !== \"undefined\"\r\n        ? settings[\"selected_header\"]\r\n        : null;\r\n    settings[\"limit\"] =\r\n      typeof settings[\"limit\"] !== \"undefined\"\r\n        ? parseInt(settings[\"limit\"])\r\n        : -1;\r\n    if (isNaN(settings[\"limit\"])) {\r\n      settings[\"limit\"] = -1;\r\n    }\r\n\r\n    // Check if already initalized\r\n    if (select.dataset.multijs != null) {\r\n      return;\r\n    }\r\n\r\n    // Make sure element is select and multiple is enabled\r\n    if (select.nodeName != \"SELECT\" || !select.multiple) {\r\n      return;\r\n    }\r\n\r\n    // Hide select\r\n    select.style.display = \"none\";\r\n    select.setAttribute(\"data-multijs\", true);\r\n\r\n    // Start constructing selector\r\n    var wrapper = document.createElement(\"div\");\r\n    wrapper.className = \"multi-wrapper\";\r\n\r\n    // Add search bar\r\n    if (settings.enable_search) {\r\n      var search = document.createElement(\"input\");\r\n      search.className = \"search-input\";\r\n      search.type = \"text\";\r\n      search.setAttribute(\"placeholder\", settings.search_placeholder);\r\n\r\n      search.addEventListener(\"input\", function() {\r\n        refresh_select(select, settings);\r\n      });\r\n\r\n      wrapper.appendChild(search);\r\n      wrapper.search = search;\r\n    }\r\n\r\n    var row_wrapper = document.createElement(\"div\");\r\n    row_wrapper.className = \"row\";\r\n\r\n    // Add columns for selected and non-selected\r\n    var non_selected = document.createElement(\"div\");\r\n    non_selected.className = \"non-selected-wrapper col-sm-6\";\r\n\r\n    var selected = document.createElement(\"div\");\r\n    selected.className = \"selected-wrapper col-sm-6\";\r\n\r\n    // Add click handler to toggle the selected status\r\n    wrapper.addEventListener(\"click\", function(event) {\r\n      if (event.target.getAttribute(\"multi-index\")) {\r\n        toggle_option(select, event, settings);\r\n      }\r\n    });\r\n\r\n    // Add keyboard handler to toggle the selected status\r\n    wrapper.addEventListener(\"keypress\", function(event) {\r\n      var is_action_key = event.keyCode === 32 || event.keyCode === 13;\r\n      var is_option = event.target.getAttribute(\"multi-index\");\r\n\r\n      if (is_option && is_action_key) {\r\n        // Prevent the default action to stop scrolling when space is pressed\r\n        event.preventDefault();\r\n        toggle_option(select, event, settings);\r\n      }\r\n    });\r\n\r\n    wrapper.appendChild(row_wrapper)\r\n    row_wrapper.appendChild(non_selected);\r\n    row_wrapper.appendChild(selected);\r\n\r\n    wrapper.non_selected = non_selected;\r\n    wrapper.selected = selected;\r\n\r\n    select.wrapper = wrapper;\r\n\r\n    // Add multi.js wrapper after select element\r\n    select.parentNode.insertBefore(wrapper, select.nextSibling);\r\n\r\n    // Save current state\r\n    for (var i = 0; i < select.options.length; i++) {\r\n      var option = select.options[i];\r\n      option.setAttribute(\"data-origin-disabled\", option.disabled);\r\n    }\r\n\r\n    // Initialize selector with values from select element\r\n    refresh_select(select, settings);\r\n\r\n    // Refresh selector when select values change\r\n    select.addEventListener(\"change\", function() {\r\n      refresh_select(select, settings);\r\n    });\r\n  };\r\n\r\n  return init;\r\n})();\r\n\r\n// Add jQuery wrapper if jQuery is present\r\nif (typeof jQuery !== \"undefined\") {\r\n  (function($) {\r\n    $.fn.multi = function(settings) {\r\n      settings = typeof settings !== \"undefined\" ? settings : {};\r\n\r\n      return this.each(function() {\r\n        var $select = $(this);\r\n\r\n        multi($select.get(0), settings);\r\n      });\r\n    };\r\n  })(jQuery);\r\n}\r\n"]}