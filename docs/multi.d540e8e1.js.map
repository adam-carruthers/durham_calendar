{"version":3,"sources":["js/multi.js"],"names":["multi","disabled_limit","toggle_option","select","event","settings","option","options","target","getAttribute","disabled","selected","limit","type","el","e","selected_count","i","length","limit_reached","opt","setAttribute","removeAttribute","document","createEvent","initEvent","dispatchEvent","refresh_select","wrapper","innerHTML","non_selected","non_selected_header","selected_header","createElement","className","innerText","appendChild","search","query","value","item_group","current_optgroup","label","textContent","row","tabIndex","clone","cloneNode","parentNode","nodeName","groupLabel","toLowerCase","indexOf","init","parseInt","isNaN","dataset","multijs","multiple","style","display","enable_search","search_placeholder","addEventListener","row_wrapper","is_action_key","keyCode","preventDefault","insertBefore","nextSibling","jQuery","$","fn","each","$select","get"],"mappings":"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","file":"multi.d540e8e1.js","sourceRoot":"..","sourcesContent":["/**\n * multi.js\n * A user-friendly replacement for select boxes with multiple attribute enabled.\n *\n * Author: Fabian Lindfors\n * License: MIT\n */\nvar multi = (function() {\n  var disabled_limit = false; // This will prevent to reset the \"disabled\" because of the limit at every click\n\n  // Helper function to trigger an event on an element\n  var trigger_event = function(type, el) {\n    var e = document.createEvent(\"HTMLEvents\");\n    e.initEvent(type, false, true);\n    el.dispatchEvent(e);\n  };\n\n  // Toggles the target option on the select\n  var toggle_option = function(select, event, settings) {\n    var option = select.options[event.target.getAttribute(\"multi-index\")];\n\n    if (option.disabled) {\n      return;\n    }\n\n    option.selected = !option.selected;\n\n    // Check if there is a limit and if is reached\n    var limit = settings.limit;\n    if (limit > -1) {\n      // Count current selected\n      var selected_count = 0;\n      for (var i = 0; i < select.options.length; i++) {\n        if (select.options[i].selected) {\n          selected_count++;\n        }\n      }\n\n      // Reached the limit\n      if (selected_count === limit) {\n        this.disabled_limit = true;\n\n        // Trigger the function (if there is)\n        if (typeof settings.limit_reached === \"function\") {\n          settings.limit_reached();\n        }\n\n        // Disable all non-selected option\n        for (var i = 0; i < select.options.length; i++) {\n          var opt = select.options[i];\n\n          if (!opt.selected) {\n            opt.setAttribute(\"disabled\", true);\n          }\n        }\n      } else if (this.disabled_limit) {\n        // Enable options (only if they weren't disabled on init)\n        for (var i = 0; i < select.options.length; i++) {\n          var opt = select.options[i];\n\n          if (opt.getAttribute(\"data-origin-disabled\") === \"false\") {\n            opt.removeAttribute(\"disabled\");\n          }\n        }\n\n        this.disabled_limit = false;\n      }\n    }\n\n    trigger_event(\"change\", select);\n  };\n\n  // Refreshes an already constructed multi.js instance\n  var refresh_select = function(select, settings) {\n    // Clear columns\n    select.wrapper.selected.innerHTML = \"\";\n    select.wrapper.non_selected.innerHTML = \"\";\n\n    // Add headers to columns\n    if (settings.non_selected_header && settings.selected_header) {\n      var non_selected_header = document.createElement(\"div\");\n      var selected_header = document.createElement(\"div\");\n\n      non_selected_header.className = \"header\";\n      selected_header.className = \"header\";\n\n      non_selected_header.innerText = settings.non_selected_header;\n      selected_header.innerText = settings.selected_header;\n\n      select.wrapper.non_selected.appendChild(non_selected_header);\n      select.wrapper.selected.appendChild(selected_header);\n    }\n\n    // Get search value\n    if (select.wrapper.search) {\n      var query = select.wrapper.search.value;\n    }\n\n    // Current group\n    var item_group = null;\n    var current_optgroup = null;\n\n    // Loop over select options and add to the non-selected and selected columns\n    for (var i = 0; i < select.options.length; i++) {\n      var option = select.options[i];\n\n      var value = option.value;\n      var label = option.textContent || option.innerText;\n\n      var row = document.createElement(\"a\");\n      row.tabIndex = 0;\n      row.className = \"item\";\n      row.innerText = label;\n      row.setAttribute(\"role\", \"button\");\n      row.setAttribute(\"data-value\", value);\n      row.setAttribute(\"multi-index\", i);\n\n      if (option.disabled) {\n        row.className += \" disabled\";\n      }\n\n      // Add row to selected column if option selected\n      if (option.selected) {\n        row.className += \" selected\";\n        var clone = row.cloneNode(true);\n        select.wrapper.selected.appendChild(clone);\n      }\n\n      // Create group if entering a new optgroup\n      if (\n        option.parentNode.nodeName == \"OPTGROUP\" &&\n        option.parentNode != current_optgroup\n      ) {\n        current_optgroup = option.parentNode;\n        item_group = document.createElement(\"div\");\n        item_group.className = \"item-group\";\n\n        if (option.parentNode.label) {\n          var groupLabel = document.createElement(\"span\");\n          groupLabel.innerHTML = option.parentNode.label;\n          groupLabel.className = \"group-label\";\n          item_group.appendChild(groupLabel);\n        }\n\n        select.wrapper.non_selected.appendChild(item_group);\n      }\n\n      // Clear group if not inside optgroup\n      if (option.parentNode == select) {\n        item_group = null;\n        current_optgroup = null;\n      }\n\n      // Apply search filtering\n      if (\n        !query ||\n        (query && label.toLowerCase().indexOf(query.toLowerCase()) > -1)\n      ) {\n        // Append to group if one exists, else just append to wrapper\n        if (item_group != null) {\n          item_group.appendChild(row);\n        } else {\n          select.wrapper.non_selected.appendChild(row);\n        }\n      }\n    }\n  };\n\n  // Intializes and constructs an multi.js instance\n  var init = function(select, settings) {\n    /**\n     * Set up settings (optional parameter) and its default values\n     *\n     * Default values:\n     * enable_search : true\n     * search_placeholder : \"Search...\"\n     */\n    settings = typeof settings !== \"undefined\" ? settings : {};\n\n    settings[\"enable_search\"] =\n      typeof settings[\"enable_search\"] !== \"undefined\"\n        ? settings[\"enable_search\"]\n        : true;\n    settings[\"search_placeholder\"] =\n      typeof settings[\"search_placeholder\"] !== \"undefined\"\n        ? settings[\"search_placeholder\"]\n        : \"Search...\";\n    settings[\"non_selected_header\"] =\n      typeof settings[\"non_selected_header\"] !== \"undefined\"\n        ? settings[\"non_selected_header\"]\n        : null;\n    settings[\"selected_header\"] =\n      typeof settings[\"selected_header\"] !== \"undefined\"\n        ? settings[\"selected_header\"]\n        : null;\n    settings[\"limit\"] =\n      typeof settings[\"limit\"] !== \"undefined\"\n        ? parseInt(settings[\"limit\"])\n        : -1;\n    if (isNaN(settings[\"limit\"])) {\n      settings[\"limit\"] = -1;\n    }\n\n    // Check if already initalized\n    if (select.dataset.multijs != null) {\n      return;\n    }\n\n    // Make sure element is select and multiple is enabled\n    if (select.nodeName != \"SELECT\" || !select.multiple) {\n      return;\n    }\n\n    // Hide select\n    select.style.display = \"none\";\n    select.setAttribute(\"data-multijs\", true);\n\n    // Start constructing selector\n    var wrapper = document.createElement(\"div\");\n    wrapper.className = \"multi-wrapper\";\n\n    // Add search bar\n    if (settings.enable_search) {\n      var search = document.createElement(\"input\");\n      search.className = \"search-input\";\n      search.type = \"text\";\n      search.setAttribute(\"placeholder\", settings.search_placeholder);\n\n      search.addEventListener(\"input\", function() {\n        refresh_select(select, settings);\n      });\n\n      wrapper.appendChild(search);\n      wrapper.search = search;\n    }\n\n    var row_wrapper = document.createElement(\"div\");\n    row_wrapper.className = \"row\";\n\n    // Add columns for selected and non-selected\n    var non_selected = document.createElement(\"div\");\n    non_selected.className = \"non-selected-wrapper col-sm-6\";\n\n    var selected = document.createElement(\"div\");\n    selected.className = \"selected-wrapper col-sm-6\";\n\n    // Add click handler to toggle the selected status\n    wrapper.addEventListener(\"click\", function(event) {\n      if (event.target.getAttribute(\"multi-index\")) {\n        toggle_option(select, event, settings);\n      }\n    });\n\n    // Add keyboard handler to toggle the selected status\n    wrapper.addEventListener(\"keypress\", function(event) {\n      var is_action_key = event.keyCode === 32 || event.keyCode === 13;\n      var is_option = event.target.getAttribute(\"multi-index\");\n\n      if (is_option && is_action_key) {\n        // Prevent the default action to stop scrolling when space is pressed\n        event.preventDefault();\n        toggle_option(select, event, settings);\n      }\n    });\n\n    wrapper.appendChild(row_wrapper)\n    row_wrapper.appendChild(non_selected);\n    row_wrapper.appendChild(selected);\n\n    wrapper.non_selected = non_selected;\n    wrapper.selected = selected;\n\n    select.wrapper = wrapper;\n\n    // Add multi.js wrapper after select element\n    select.parentNode.insertBefore(wrapper, select.nextSibling);\n\n    // Save current state\n    for (var i = 0; i < select.options.length; i++) {\n      var option = select.options[i];\n      option.setAttribute(\"data-origin-disabled\", option.disabled);\n    }\n\n    // Initialize selector with values from select element\n    refresh_select(select, settings);\n\n    // Refresh selector when select values change\n    select.addEventListener(\"change\", function() {\n      refresh_select(select, settings);\n    });\n  };\n\n  return init;\n})();\n\n// Add jQuery wrapper if jQuery is present\nif (typeof jQuery !== \"undefined\") {\n  (function($) {\n    $.fn.multi = function(settings) {\n      settings = typeof settings !== \"undefined\" ? settings : {};\n\n      return this.each(function() {\n        var $select = $(this);\n\n        multi($select.get(0), settings);\n      });\n    };\n  })(jQuery);\n}\n"]}